import{a as N}from"./chunk-IEDRN2C6.js";import{a as k,b as _,c as A,d as R,h as q,i as D,j as V,k as G,m as I}from"./chunk-XWPKPYAP.js";import"./chunk-MMKAGRZ3.js";import{c as x,d as T}from"./chunk-OTHD5K73.js";import"./chunk-5RERRQ3R.js";import{Eb as s,Gb as y,Mb as L,Oa as m,Pb as S,_ as h,ba as E,db as g,fb as F,jb as u,nb as o,ob as i,pb as C,rc as b,ub as w,vb as v}from"./chunk-QOXXASHQ.js";var M=(e,n)=>({"is-valid":e,"is-invalid":n});function B(e,n){e&1&&(o(0,"p",13),s(1,"Email Is Required"),i())}function P(e,n){e&1&&(o(0,"p",13),s(1,"Enter Valid Email.. "),i())}function j(e,n){if(e&1&&(o(0,"div",6),g(1,B,2,0,"p",13)(2,P,2,0),i()),e&2){let d,l=v();m(),u(1,(d=l.loginForm.get("email"))!=null&&d.getError("required")?1:(d=l.loginForm.get("email"))!=null&&d.getError("email")?2:-1)}}function O(e,n){e&1&&(o(0,"p",13),s(1,"password Is Required"),i())}function U(e,n){e&1&&(o(0,"p",13),s(1,"Enter Valid password.. "),i())}function $(e,n){if(e&1&&(o(0,"div",6),g(1,O,2,0,"p",13)(2,U,2,0),i()),e&2){let d,l=v();m(),u(1,(d=l.loginForm.get("password"))!=null&&d.getError("required")?1:(d=l.loginForm.get("password"))!=null&&d.getError("pattern")?2:-1)}}function z(e,n){e&1&&(o(0,"span"),C(1,"i",14),i())}function H(e,n){if(e&1&&(o(0,"p",6),s(1),i()),e&2){let d=v();m(),y(" ",d.msgError," ")}}function J(e,n){e&1&&(o(0,"p",12),s(1,"Success"),i())}var ie=(()=>{let n=class n{constructor(){this._AuthService=h(N),this._FormBuilder=h(G),this._Router=h(x),this.msgSuccess=!1,this.msgError="",this.isLoading=!1,this.loginForm=this._FormBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isLoading=!0,this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:l=>{console.log(l),l.message=="success"&&(this.msgSuccess=!0,setTimeout(()=>{localStorage.setItem("userToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1e3)),this.isLoading=!1},error:l=>{this.msgError=l.error.message,this.isLoading=!1,console.log(l)}}),console.log(this.loginForm)):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}};n.\u0275fac=function(f){return new(f||n)},n.\u0275cmp=E({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:14,consts:[[1,"bg-main-light","shadow","p-2","my-2","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50","m-0"],["for","pass"],["formControlName","password","id","pass","type","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forget",1,"link-primary"],["type","submit",1,"btn-main"],[1,"text-center","text-success"],[1,"m-0"],[1,"fas","fa-spi","fa-spinner"]],template:function(f,t){if(f&1&&(o(0,"section",0)(1,"h1",1),s(2,"login Now:"),i(),o(3,"form",2),w("ngSubmit",function(){return t.loginSubmit()}),o(4,"div",3)(5,"label",4),s(6,"email"),i(),C(7,"input",5),g(8,j,3,1,"div",6),i(),o(9,"div",3)(10,"label",7),s(11,"Password"),i(),C(12,"input",8),g(13,$,3,1,"div",6),i(),o(14,"div",9)(15,"a",10),s(16,"Forget Password"),i(),o(17,"button",11),s(18," login "),g(19,z,2,0,"span"),i()(),g(20,H,2,1,"p",6)(21,J,2,0,"p",12),i()()),f&2){let r,p,a,c;m(3),F("formGroup",t.loginForm),m(4),F("ngClass",S(8,M,!((r=t.loginForm.get("email"))!=null&&r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)),((r=t.loginForm.get("email"))==null?null:r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)))),m(),u(8,(p=t.loginForm.get("email"))!=null&&p.errors&&((p=t.loginForm.get("email"))!=null&&p.touched||(p=t.loginForm.get("email"))!=null&&p.dirty)?8:-1),m(4),F("ngClass",S(11,M,!((a=t.loginForm.get("password"))!=null&&a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)),((a=t.loginForm.get("password"))==null?null:a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)))),m(),u(13,(c=t.loginForm.get("password"))!=null&&c.errors&&((c=t.loginForm.get("password"))!=null&&c.touched||(c=t.loginForm.get("password"))!=null&&c.dirty)?13:-1),m(6),u(19,t.isLoading?19:-1),m(),u(20,t.msgError?20:-1),m(),u(21,t.msgSuccess?21:-1)}},dependencies:[I,q,k,A,R,D,V,b,T],styles:[".form-control[_ngcontent-%COMP%]:focus{border-color:inherit;-webkit-box-shadow:none;box-shadow:none}"]});let e=n;return e})();export{ie as LoginComponent};
