import{a as P}from"./chunk-2FSKLOKQ.js";import{a as D}from"./chunk-D3WG7ASJ.js";import"./chunk-WXI33M2S.js";import{a as F}from"./chunk-LA4PECPB.js";import"./chunk-MMKAGRZ3.js";import"./chunk-5RERRQ3R.js";import{Eb as l,Fb as S,Gb as w,Ka as g,Mb as L,Oa as c,Sb as y,Ub as W,_ as m,ba as x,db as v,fb as _,jb as C,la as h,ma as u,nb as o,ob as n,pb as d,sb as b,sc as E,ub as f,vb as p,xc as T}from"./chunk-QOXXASHQ.js";function k(r,i){r&1&&(o(0,"span"),d(1,"i",13),n())}function V(r,i){if(r&1){let s=b();o(0,"div",3)(1,"div",4)(2,"div"),d(3,"img",5),n()(),o(4,"div",6)(5,"div",7)(6,"div")(7,"p"),l(8),n(),o(9,"p",8),l(10),y(11,"currency"),n()(),o(12,"div",9)(13,"div")(14,"button",10),f("click",function(){let e=h(s).$implicit,a=p();return u(a.removeProduct(e.id))}),d(15,"i",11),l(16," Remove "),n()(),o(17,"div")(18,"button",12),f("click",function(){let e=h(s).$implicit,a=p();return u(a.addCart(e._id))}),l(19," Add to Cart "),v(20,k,2,0,"span"),n()()()()()()}if(r&2){let s=i.$implicit,t=p();c(3),_("src",s.imageCover,g)("alt",s.title),c(5),w(" ",s.description," "),c(2),S(W(11,5,s.price,"EGP")),c(10),C(20,t.isLoading[s._id]?20:-1)}}var A=(()=>{let i=class i{constructor(){this._WishListService=m(P),this._CartService=m(F),this._ToastrService=m(D),this.wishListDetails=[],this.isLoading={}}ngOnInit(){this._WishListService.getProductsWishList().subscribe({next:t=>{console.log(t.data),this.wishListDetails=t.data},error:t=>{console.log(t)}})}removeProduct(t){this._WishListService.removeProductFromWishList(t).subscribe({next:e=>{console.log(e),this.wishListDetails=this.wishListDetails.filter(a=>a.id!==t)},error:e=>{console.log(e)}})}addCart(t){this.isLoading[t]||(this.isLoading[t]=!0,this._CartService.addProductToCart(t).subscribe({next:e=>{console.log(e),this.isLoading[t]=!1,this._ToastrService.success(e.message,"FrechCart"),this._CartService.cartNumber.set(e.numOfCartItems)}}))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=x({type:i,selectors:[["app-wishlist"]],standalone:!0,features:[L],decls:4,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"h2","text-center"],["class","row mb-2 border-bottom ",4,"ngFor","ngForOf"],[1,"row","mb-2","border-bottom"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10"],[1,"mt-5"],[1,"m-0","text-main"],[1,"d-flex","justify-content-between"],[1,"text-danger","cursor-pointer","p-0","btn",3,"click"],[1,"fa-solid","fa-trash"],["type","submit",1,"btn-main",3,"click"],[1,"fas","fa-spi","fa-spinner"]],template:function(e,a){e&1&&(o(0,"section",0)(1,"h1",1),l(2,"My Wishlist"),n(),v(3,V,21,8,"div",2),n()),e&2&&(c(3),_("ngForOf",a.wishListDetails))},dependencies:[E,T]});let r=i;return r})();export{A as WishlistComponent};
