import './polyfills.server.mjs';
import{a as q}from"./chunk-UWALETWP.mjs";import{a as J}from"./chunk-ADYXNFLV.mjs";import{a as G}from"./chunk-4Z7KVGEI.mjs";import{a as U}from"./chunk-33GCJAZL.mjs";import{d as R}from"./chunk-5XL6SRXP.mjs";import{a as H}from"./chunk-4JOTGNO5.mjs";import"./chunk-GTSSCL6B.mjs";import{a as D,c as O,g as $,l as z}from"./chunk-MPVHYGAR.mjs";import"./chunk-WVUI6REW.mjs";import{e as B}from"./chunk-T6LSPTFU.mjs";import"./chunk-2TP74RLZ.mjs";import{$ as w,Ac as j,Fb as l,Hb as p,Jb as y,Kb as W,La as F,Lb as k,Nb as E,Ob as M,Pa as s,Pb as A,Qb as I,Tb as N,Vb as V,X as d,_a as T,eb as f,gb as v,ja as _,ka as g,kb as C,lb as P,mb as x,nb as S,ob as o,pb as a,qb as m,tb as b,vb as L,wb as u}from"./chunk-DMXLVJ6G.mjs";import"./chunk-VVCT4QZE.mjs";var K=(i,r)=>r.id,Q=i=>["/details",i],X=(i,r)=>({"fa-regular":i,"fa-solid text-danger":r}),Y=()=>[1,2,3,4,5];function Z(i,r){i&1&&(o(0,"span"),m(1,"i",14),a())}function ee(i,r){i&1&&m(0,"i",11)}function te(i,r){i&1&&(o(0,"span"),m(1,"i",15),a())}function ie(i,r){if(i&1){let n=b();o(0,"div",3)(1,"div",4)(2,"div"),m(3,"img",5),o(4,"h3",6),l(5),a(),o(6,"div",7)(7,"div")(8,"h4",8),l(9),a()(),o(10,"div")(11,"i",9),L("click",function(){let t=_(n).$implicit,c=u();return g(c.toggleWishList(t.id))}),a()()(),o(12,"div",10)(13,"span"),l(14),a(),o(15,"div"),x(16,Z,2,0,"span",null,P),f(18,ee,1,0,"i",11),o(19,"span",12),l(20),a()()()(),o(21,"button",13),L("click",function(){let t=_(n).$implicit,c=u();return g(c.addCart(t.id))}),l(22," Add to Cart "),f(23,te,2,0,"span"),a()()()}if(i&2){let n=r.$implicit,e=u();s(3),v("routerLink",A(10,Q,n.id))("src",n.imageCover,F)("alt",n.title),s(2),p(" ",n.category.name," "),s(4),p(" ",n.title.split(" ").slice(0,2).join(" ")," "),s(2),v("ngClass",I(12,X,!e.wishlist[n.id],e.wishlist[n.id])),s(3),p("",n.price," EGP"),s(2),S(M(15,Y).slice(0,n.ratingsAverage)),s(2),C(18,n.ratingsAverage%1!==0?18:-1),s(2),p(" ",n.ratingsAverage," "),s(3),C(23,e.isLoading[n._id]?23:-1)}}var Ce=(()=>{let r=class r{constructor(){this._ProductsService=d(U),this._CartService=d(G),this._ToastrService=d(H),this._WishListService=d(J),this.productList=T([]),this.text="",this.isLoading={},this.wishlist={}}ngOnInit(){this.getAllProductSub=this._ProductsService.getAllProducts().subscribe({next:e=>{console.log(e.data),this.productList.set(e.data)}})}ngOnDestroy(){this.getAllProductSub?.unsubscribe()}addCart(e){this.isLoading[e]||(this.isLoading[e]=!0,this._CartService.addProductToCart(e).subscribe({next:t=>{console.log(t),this.isLoading[e]=!1,this._ToastrService.success(t.message,"FrechCart"),this._CartService.cartNumber.set(t.numOfCartItems)}}))}toggleWishList(e){this.wishlist[e]=!this.wishlist[e],this.wishlist[e]?this.addToWishList(e):this.removeFromWishList(e)}removeFromWishList(e){this._WishListService.removeProductFromWishList(e).subscribe({next:t=>{console.log(t),this._ToastrService.success(t.message,"FrechCart")},error:t=>{console.log(t)}})}addToWishList(e){this._WishListService.addProductToWishList(e).subscribe({next:t=>{console.log(t),this._ToastrService.success(t.message,"FrechCart")},error:t=>{console.log(t),this._ToastrService.error(t.message,"FrechCart")}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=w({type:r,selectors:[["app-product"]],standalone:!0,features:[E],decls:8,vars:4,consts:[[1,"container"],["type","search","placeholder","Search By Name",1,"form-control","w-50","mx-auto","my-4",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-3"],[1,"product","p-2"],[1,"w-100","cursor-pointer",3,"routerLink","src","alt"],[1,"small","text-main"],[1,"d-flex","justify-content-between"],[1,"h6"],[1,"fa-heart","fa-xl","cursor-pointer",3,"click","ngClass"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],["type","submit",1,"btn-main","w-100",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-spi","fa-spinner"]],template:function(t,c){t&1&&(o(0,"h2"),l(1," Products :"),a(),o(2,"section",0)(3,"input",1),k("ngModelChange",function(h){return W(c.text,h)||(c.text=h),h}),a(),o(4,"div",2),x(5,ie,24,16,"div",3,K),N(7,"search"),a()()),t&2&&(s(3),y("ngModel",c.text),s(2),S(V(7,1,c.productList(),c.text)))},dependencies:[B,q,R,z,D,O,$,j]});let i=r;return i})();export{Ce as ProductComponent};
