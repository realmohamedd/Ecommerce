import './polyfills.server.mjs';
import{a as N}from"./chunk-CZDI7MZM.mjs";import{a as q,b as c,c as L,d as G,e as x,f as w,h as R,i as A,j as D,m as M}from"./chunk-MPVHYGAR.mjs";import"./chunk-WVUI6REW.mjs";import{d as V}from"./chunk-T6LSPTFU.mjs";import"./chunk-2TP74RLZ.mjs";import{$ as S,Ac as T,Cc as I,Fb as m,Nb as F,Pa as s,Qb as g,X as E,eb as u,gb as a,ja as v,ka as C,kb as b,ob as l,pb as r,qb as f,tb as y,vb as P,wb as p}from"./chunk-DMXLVJ6G.mjs";import"./chunk-VVCT4QZE.mjs";var h=(n,o)=>({"is-valid":n,"is-invalid":o});function k(n,o){n&1&&(l(0,"p",11),m(1,"Email is required"),r())}function $(n,o){n&1&&(l(0,"p",11),m(1,"Enter a valid email"),r())}function j(n,o){if(n&1&&(l(0,"div",9),u(1,k,2,0,"p",10)(2,$,2,0,"p",10),r()),n&2){let t,i,e=p(2);s(),a("ngIf",(t=e.verifyEmail.get("email"))==null?null:t.hasError("required")),s(),a("ngIf",(i=e.verifyEmail.get("email"))==null?null:i.hasError("email"))}}function U(n,o){n&1&&(l(0,"span"),f(1,"i",12),r())}function z(n,o){if(n&1){let t=y();l(0,"form",2),P("ngSubmit",function(){v(t);let e=p();return C(e.verifyEmailSubmit())}),l(1,"div",3)(2,"label",4),m(3,"Email"),r(),f(4,"input",5),u(5,j,3,2,"div",6),r(),l(6,"button",7),m(7," Verify Email "),u(8,U,2,0,"span",8),r()()}if(n&2){let t,i,e=p();a("formGroup",e.verifyEmail),s(4),a("ngClass",g(5,h,!((t=e.verifyEmail.get("email"))!=null&&t.errors)&&(((t=e.verifyEmail.get("email"))==null?null:t.touched)||((t=e.verifyEmail.get("email"))==null?null:t.dirty)),((t=e.verifyEmail.get("email"))==null?null:t.errors)&&(((t=e.verifyEmail.get("email"))==null?null:t.touched)||((t=e.verifyEmail.get("email"))==null?null:t.dirty)))),s(),a("ngIf",((i=e.verifyEmail.get("email"))==null?null:i.errors)&&(((i=e.verifyEmail.get("email"))==null?null:i.touched)||((i=e.verifyEmail.get("email"))==null?null:i.dirty))),s(),a("disabled",e.verifyEmail.invalid),s(2),a("ngIf",e.isLoading)}}function B(n,o){n&1&&(l(0,"p",11),m(1,"Reset code is required"),r())}function H(n,o){n&1&&(l(0,"p",11),m(1,"Enter a valid reset code"),r())}function J(n,o){if(n&1&&(l(0,"div",9),u(1,B,2,0,"p",10)(2,H,2,0,"p",10),r()),n&2){let t,i,e=p(2);s(),a("ngIf",(t=e.verifyCode.get("resetCode"))==null?null:t.hasError("required")),s(),a("ngIf",(i=e.verifyCode.get("resetCode"))==null?null:i.hasError("pattern"))}}function K(n,o){n&1&&(l(0,"span"),f(1,"i",12),r())}function O(n,o){if(n&1){let t=y();l(0,"form",13),P("ngSubmit",function(){v(t);let e=p();return C(e.verifyCodeSubmit())}),l(1,"div",3)(2,"label",14),m(3,"Reset Code"),r(),f(4,"input",15),u(5,J,3,2,"div",6),r(),l(6,"button",7),m(7," Verify Code "),u(8,K,2,0,"span",8),r()()}if(n&2){let t,i,e=p();a("formGroup",e.verifyCode),s(4),a("ngClass",g(5,h,!((t=e.verifyCode.get("resetCode"))!=null&&t.errors)&&(((t=e.verifyCode.get("resetCode"))==null?null:t.touched)||((t=e.verifyCode.get("resetCode"))==null?null:t.dirty)),((t=e.verifyCode.get("resetCode"))==null?null:t.errors)&&(((t=e.verifyCode.get("resetCode"))==null?null:t.touched)||((t=e.verifyCode.get("resetCode"))==null?null:t.dirty)))),s(),a("ngIf",((i=e.verifyCode.get("resetCode"))==null?null:i.errors)&&(((i=e.verifyCode.get("resetCode"))==null?null:i.touched)||((i=e.verifyCode.get("resetCode"))==null?null:i.dirty))),s(),a("disabled",e.verifyCode.invalid),s(2),a("ngIf",e.isLoading)}}function Q(n,o){n&1&&(l(0,"p",11),m(1,"Email is required"),r())}function W(n,o){n&1&&(l(0,"p",11),m(1,"Enter a valid email"),r())}function X(n,o){if(n&1&&(l(0,"div",9),u(1,Q,2,0,"p",10)(2,W,2,0,"p",10),r()),n&2){let t,i,e=p(2);s(),a("ngIf",(t=e.resetPassword.get("email"))==null?null:t.hasError("required")),s(),a("ngIf",(i=e.resetPassword.get("email"))==null?null:i.hasError("email"))}}function Y(n,o){n&1&&(l(0,"p",11),m(1,"New password is required"),r())}function Z(n,o){n&1&&(l(0,"p",11),m(1,"Enter a valid new password "),r())}function ee(n,o){if(n&1&&(l(0,"div",9),u(1,Y,2,0,"p",10)(2,Z,2,0,"p",10),r()),n&2){let t,i,e=p(2);s(),a("ngIf",(t=e.resetPassword.get("newPassword"))==null?null:t.hasError("required")),s(),a("ngIf",(i=e.resetPassword.get("newPassword"))==null?null:i.hasError("pattern"))}}function te(n,o){n&1&&(l(0,"span"),f(1,"i",12),r())}function ie(n,o){if(n&1){let t=y();l(0,"form",13),P("ngSubmit",function(){v(t);let e=p();return C(e.resetPasswordSubmit())}),l(1,"div",3)(2,"label",4),m(3,"Email"),r(),f(4,"input",16),u(5,X,3,2,"div",6),r(),l(6,"div",3)(7,"label",17),m(8,"New Password"),r(),f(9,"input",18),u(10,ee,3,2,"div",6),r(),l(11,"button",7),m(12," Reset Password "),u(13,te,2,0,"span",8),r()()}if(n&2){let t,i,e,_,d=p();a("formGroup",d.resetPassword),s(4),a("ngClass",g(7,h,!((t=d.resetPassword.get("email"))!=null&&t.errors)&&(((t=d.resetPassword.get("email"))==null?null:t.touched)||((t=d.resetPassword.get("email"))==null?null:t.dirty)),((t=d.resetPassword.get("email"))==null?null:t.errors)&&(((t=d.resetPassword.get("email"))==null?null:t.touched)||((t=d.resetPassword.get("email"))==null?null:t.dirty)))),s(),a("ngIf",((i=d.resetPassword.get("email"))==null?null:i.errors)&&(((i=d.resetPassword.get("email"))==null?null:i.touched)||((i=d.resetPassword.get("email"))==null?null:i.dirty))),s(4),a("ngClass",g(10,h,!((e=d.resetPassword.get("newPassword"))!=null&&e.errors)&&(((e=d.resetPassword.get("newPassword"))==null?null:e.touched)||((e=d.resetPassword.get("newPassword"))==null?null:e.dirty)),((e=d.resetPassword.get("newPassword"))==null?null:e.errors)&&(((e=d.resetPassword.get("newPassword"))==null?null:e.touched)||((e=d.resetPassword.get("newPassword"))==null?null:e.dirty)))),s(),a("ngIf",((_=d.resetPassword.get("newPassword"))==null?null:_.errors)&&(((_=d.resetPassword.get("newPassword"))==null?null:_.touched)||((_=d.resetPassword.get("newPassword"))==null?null:_.dirty))),s(),a("disabled",d.resetPassword.invalid),s(2),a("ngIf",d.isLoading)}}var pe=(()=>{let o=class o{constructor(){this._AuthService=E(N),this._Router=E(V),this.isLoading=!1,this.step=1,this.verifyEmail=new x({email:new w(null,[c.required,c.email])}),this.verifyCode=new x({resetCode:new w(null,[c.required,c.pattern(/^[0-9]{6}$/)])}),this.resetPassword=new x({email:new w(null,[c.required,c.email]),newPassword:new w(null,[c.required,c.pattern(/^\w{6,}$/)])})}verifyEmailSubmit(){let i=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(i),this.verifyEmail.valid&&(this.isLoading=!0,this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:e=>{console.log(e),e.statusMsg==="success"&&(this.step=2),this.isLoading=!1},error:e=>{console.log(e)}}))}verifyCodeSubmit(){this.verifyCode.valid&&(this.isLoading=!0,this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:i=>{console.log(i),i.status==="Success"&&(this.step=3),this.isLoading=!1},error:i=>{console.log(i)}}))}resetPasswordSubmit(){this.resetPassword.valid&&(this.isLoading=!0,this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:i=>{console.log(i),localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]),this.isLoading=!1},error:i=>{console.log(i)}}))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=S({type:o,selectors:[["app-forget-password"]],standalone:!0,features:[F],decls:6,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],["class","alert alert-danger w-50 m-0",4,"ngIf"],["type","submit",1,"btn-main",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger","w-50","m-0"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],[1,"bg-main-light","rounded-4","shadow","p-3","mt-4",3,"ngSubmit","formGroup"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control",3,"ngClass"],["readonly","","formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],["for","newPassword"],["formControlName","newPassword","type","password","id","newPassword",1,"form-control",3,"ngClass"]],template:function(e,_){e&1&&(l(0,"section")(1,"h1",0),m(2,"Forget Password"),r(),u(3,z,9,8,"form",1)(4,O,9,8)(5,ie,14,13),r()),e&2&&(s(3),b(3,_.step==1?3:_.step==2?4:_.step==3?5:-1))},dependencies:[M,R,q,L,G,A,D,T,I]});let n=o;return n})();export{pe as ForgetPasswordComponent};
